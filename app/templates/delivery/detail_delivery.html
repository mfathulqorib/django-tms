{% extends 'core/base_authenticated.html' %}
{% load static %}

{% block child_content %}
<div class="container mx-auto max-w-2xl p-6">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">📦 Delivery Order Details</h1>

    <div class="bg-white shadow-md rounded-2xl p-6 border border-gray-200 mb-6">
        <div class="space-y-2 text-sm text-gray-700">
            <p>📤 <span class="font-medium text-gray-600">Assigned by:</span> {{ delivery.actor }}</p>
            <p>📅 <span class="font-medium text-gray-600">Assigned date:</span> {{ delivery.date_assigned|date:"d M Y H:i" }}</p>
            <p>⏳ <span class="font-medium text-gray-600">ETA:</span> {{ delivery.estimated_time_arrival|date:"d M Y H:i" }}</p>
        </div>
    </div>

    {% if messages %}
        <div class="mb-4">
            {% for message in messages %}
                <div class="{% if message.tags == 'error' %}bg-red-100 border border-red-300 text-red-800{% else %}bg-green-100 border border-green-300 text-green-800{% endif %} px-4 py-3 rounded-lg text-sm">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <form method="post" class="bg-white shadow-md rounded-2xl p-6 border border-gray-200 space-y-5">
        {% csrf_token %}

        <div class="flex items-center space-x-3">
            <input type="checkbox" id="is_delivered" name="is_delivered"
                {% if delivery.is_delivered %}checked{% endif %}
                class="h-5 w-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300">
            <label for="is_delivered" class="text-gray-700 text-sm font-medium">Mark as Delivered</label>
        </div>

        <div>
            <label for="date_delivered" class="block text-sm font-medium text-gray-700 mb-1">Delivery Date</label>
            <input type="datetime-local" name="date_delivered" id="date_delivered"
                   class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                   value="{{ delivery.date_delivered|date:'Y-m-d\\TH:i' }}" required>
        </div>

        <div class="flex justify-start">
            <button type="submit"
                class="bg-blue-600 text-white font-medium py-2 px-5 rounded-full hover:bg-blue-700 transition">
                💾 Save Changes
            </button>
        </div>
    </form>
</div>
{% endblock %}